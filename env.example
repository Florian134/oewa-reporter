# ÖWA Reporting System - Environment Variables
# =============================================
# Kopiere diese Datei nach .env und fülle die Werte aus.
# NIEMALS .env in Git committen!

# =============================================================================
# REQUIRED - INFOnline API
# =============================================================================
INFONLINE_API_KEY=your_api_key_here
INFONLINE_API_URL=https://reportingapi.infonline.de
INFONLINE_TIMEOUT=30
INFONLINE_MAX_RETRIES=3

# =============================================================================
# REQUIRED - Datenbank
# =============================================================================
# PostgreSQL (Produktion)
DATABASE_URL=postgresql+psycopg2://user:password@host:5432/oewa_reporting

# SQLite (Entwicklung/Test)
# DATABASE_URL=sqlite:///oewa_test.db

DATABASE_ECHO=false
DATABASE_POOL_SIZE=5

# =============================================================================
# REQUIRED - Microsoft Teams
# =============================================================================
# RM-ÖWA-Test Channel Webhook
TEAMS_WEBHOOK_URL=https://your-tenant.webhook.office.com/webhookb2/your-webhook-id
TEAMS_ENABLED=true
TEAMS_RETRY_ATTEMPTS=3

# =============================================================================
# OPTIONAL - OpenAI GPT (für KI-Reports)
# =============================================================================
OPENAI_API_KEY=sk-proj-...
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=1000
OPENAI_ENABLED=true

# =============================================================================
# OPTIONAL - Airtable Sync
# =============================================================================
AIRTABLE_API_KEY=pat_your_token_here
AIRTABLE_BASE_ID=app_your_base_id_here
AIRTABLE_ENABLED=false
AIRTABLE_MEASUREMENTS_TABLE=Measurements
AIRTABLE_ALERTS_TABLE=Alerts

# =============================================================================
# ALERT SCHWELLENWERTE
# =============================================================================
# Page Impressions - Absolute Mindestwerte pro Tag
ALERT_PI_WARNING=300000
ALERT_PI_CRITICAL=200000
ALERT_PI_EMERGENCY=100000

# Prozentuale Abweichung vs. Vorwoche
ALERT_PCT_WARNING=-0.15
ALERT_PCT_CRITICAL=-0.25
ALERT_PCT_EMERGENCY=-0.40

# =============================================================================
# ANOMALIE-ERKENNUNG
# =============================================================================
ANOMALY_LOOKBACK_DAYS=56
ANOMALY_MIN_DATA_POINTS=7
ANOMALY_WARNING_ZSCORE=2.0
ANOMALY_WARNING_PCT=0.15
ANOMALY_CRITICAL_ZSCORE=2.5
ANOMALY_CRITICAL_PCT=0.20

# =============================================================================
# SECURITY - API Authentication
# =============================================================================
# WICHTIG: Generiere ein sicheres Secret mit:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
CRON_SECRET=your-secure-random-secret-here

# =============================================================================
# SONSTIGES
# =============================================================================
LOG_LEVEL=INFO
INCLUDE_VIENNA=false
METRICS=pageimpressions,visits
